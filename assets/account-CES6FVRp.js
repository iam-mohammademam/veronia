import{u as v,a as A,r as x,g as F,s as M,b,j as e,N as $,i as k,c as P,d as g,L,S as C,e as T,P as U,f,h as B,k as D,_ as j,l as E,n as I,m as R,A as S,o as _}from"./index-s-qoL97y.js";import{C as O,a as K}from"./cardSkeleton-CbNivtr8.js";import{P as W}from"./pagination-Db9PqB-A.js";const z=()=>{var r,n;const l=v(),c=A(),[m,h]=x.useState(1);x.useEffect(()=>{l(F(`/blogs/my-blogs?sort=-createdAt&limit=6&page=${m}&${M}`))},[m]);const{data:t,loading:s,error:u}=b(o=>o.myBlogs);return u?e.jsx($,{to:`/${k}/error`}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl font-medium mb-5 text-center",children:"My blogs"}),e.jsxs("div",{className:"lg:w-4/5 w-full mx-auto",children:[s?e.jsx(e.Fragment,{children:[...Array(8)].map((o,a)=>e.jsx(O,{},a))}):((r=t==null?void 0:t.results)==null?void 0:r.length)<=0?e.jsx("div",{className:"h-[80vh] w-full flex items-center justify-center ",children:e.jsxs("h1",{className:"text-lg font-medium text-center",children:["You have no blog."," ",e.jsx("span",{onClick:()=>{c(`/${k}/post`)},className:"underline cursor-pointer",children:"create"})]})}):e.jsx("div",{className:"flex flex-col gap-y-6",children:(n=t==null?void 0:t.results)==null?void 0:n.map((o,a)=>e.jsx(K,{item:o,options:!0,column:!0},a))}),e.jsx("div",{className:"mt-6 pb-5",children:e.jsx(W,{totalPages:t==null?void 0:t.total_pages,setCurrPage:h})})]})]})},Y=()=>{var o;const l=v(),[c,m]=x.useState(!1),[h,t]=x.useState(!1),{initialState:s}=b(a=>a.others),u=P("token"),r=a=>{const{name:i,value:p}=a.target;l(f({key:i,value:p}))},n=async a=>{var p,N,w,y;a.preventDefault();const i=new FormData;i.append("avatar",s.avatar),i.append("username",s.username),i.append("fullName",s.fullName),i.append("email",s.email),i.append("password",s.password),t(!0);try{const d=await B.put(`${D}/user/update`,i,{headers:{authorization:u}});j.success((p=d==null?void 0:d.data)==null?void 0:p.message),E("user",(N=d==null?void 0:d.data)==null?void 0:N.result),setTimeout(()=>(l(f(null)),location.reload()),700)}catch(d){return j.error((y=(w=d==null?void 0:d.response)==null?void 0:w.data)==null?void 0:y.message)}finally{t(!1),m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-black",children:e.jsx("img",{src:(o=s==null?void 0:s.avatar)!=null&&o.name?URL.createObjectURL(s==null?void 0:s.avatar):s==null?void 0:s.avatar,alt:"avatar",className:"w-full h-full object-cover object-center"})}),e.jsx("div",{onClick:()=>{l(g("avatars"))},className:"absolute bottom-0 right-0",children:e.jsx(L,{})})]}),e.jsxs("div",{className:"mt-4 flex flex-col items-center w-auto",children:[e.jsx("input",{type:"text",name:"username",value:s==null?void 0:s.username,onChange:r,className:"w-fit border py-1.5 rounded-sm outline-none text-center text-sm px-2 font-medium bg-transparent"}),e.jsx("input",{type:"text",name:"fullName",value:s==null?void 0:s.fullName,onChange:r,className:"w-fit border py-1.5 rounded-sm outline-none text-center px-2 bg-transparent font-medium"}),e.jsx("span",{className:"font-medium",children:s==null?void 0:s.email}),e.jsx("div",{onClick:()=>m(!0),className:"w-full",children:e.jsx(C,{text:"Save changes",color:"black"})})]})]}),c&&e.jsx("div",{onClick:()=>m(!1),className:"fixed top-0 left-0 h-full w-full bg-black/15"}),e.jsx("div",{className:`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 ${c?"scale-100":"scale-50 opacity-0 pointer-events-none"} duration-300 transition-all max-[300px]:w-[90%] `,children:e.jsxs("div",{className:"p-5 rounded-md bg-slate-50 shadow-md relative border border-white/20 text-center",children:[e.jsx("div",{onClick:()=>m(!1),className:"absolute top-2 right-2 cursor-pointer h-8 w-8 flex items-center justify-center rounded-full hover:bg-gray-500/20 transition-all duration-300",children:e.jsx(T,{className:"text-md"})}),e.jsx("h1",{className:"text-lg font-medium mb-4 mt-2 min-[300px]:whitespace-nowrap",children:"Confirm your password"}),e.jsxs("form",{onSubmit:n,children:[e.jsx(U,{password:s==null?void 0:s.password,handleChange:r,color:"black"}),e.jsx(C,{loading:h,text:"Update profile",color:"black"})]})]})})]})},q=()=>{const l=v(),[c,m]=x.useState(null),h=({target:r})=>{var a;const n=r.files[0];if(((a=n==null?void 0:n.type)==null?void 0:a.split("/")[0])==="image")l(f({key:"avatar",value:n})),l(g("profile"));else return j.error("Only image supported.")},t=P("user"),s=["notionists","adventurer","personas","lorelei","micah","initials","miniavs","avataaars","open-peeps"],u=()=>{let r=[],n=new Set;for(let o=0;o<6;o++){let a;do a=s[Math.floor(Math.random()*s.length)];while(n.has(a));n.add(a);let i=`https://api.dicebear.com/6.x/${a}/svg?seed=${t==null?void 0:t.fullName}`;r.push(i)}m(r)};return x.useEffect(()=>{u()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full h-full flex flex-col gap-y-5 items-center justify-center",children:[e.jsxs("div",{className:"gap-4 flex-wrap flex items-center justify-center",children:[c==null?void 0:c.map((r,n)=>e.jsx("div",{onClick:()=>{l(f({key:"avatar",value:r})),l(g("profile"))},className:"h-24 cursor-pointer w-24 shrink-0 bg-black rounded-full overflow-hidden",children:e.jsx("img",{src:r||I,alt:"",className:"w-full h-full object-cover object-center"})},n)),e.jsx("input",{type:"file",accept:"image/",name:"",id:"avatar",onChange:h,className:"hidden"}),e.jsx("label",{htmlFor:"avatar",className:"w-24 h-24 bg-black rounded-full shrink-0 flex items-center justify-center cursor-pointer",children:e.jsx(R,{className:"text-3xl text-white"})})]}),e.jsx("button",{onClick:()=>{u()},className:"bg-black group/btn text-white w-8 h-8 flex items-center justify-center rounded-full",children:e.jsx(S,{className:"text-xl group-hover/btn:animate-spin duration-300 transition-all"})})]})})},Q=()=>{const{activeMenu:l}=b(c=>c.others);return e.jsxs("div",{className:"w-screen flex min-h-screen md:px-[10%] px-[5%] p-5 gap-5 flex-nowrap relative",children:[e.jsx("div",{className:"lg:w-1/5 md:w-1/4 sm:w-1/3 max-[500px]:hidden shrink-0  border-r border-black/10",children:e.jsx(_,{})}),e.jsx("div",{className:"w-full",children:l==="profile"?e.jsx(Y,{}):l==="avatars"?e.jsx(q,{}):l==="blogs"?e.jsx(z,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex items-center justify-center text-center h-full",children:e.jsxs("h1",{className:"text-lg font-medium",children:["Sorry, ",e.jsx("br",{})," This function is still under development"]})})})})]})};export{Q as default};
